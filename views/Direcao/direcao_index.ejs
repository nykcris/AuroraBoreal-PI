<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Direção-Aurora Boreal</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="img/AURORALOGOSFUNDO.ico" rel="icon">
  <link href="img/AURORALOGOSFUNDO.ico" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: NiceAdmin
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Updated: Apr 20 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
      <a href="/" class="logo d-flex align-items-center">
        <img src="img/AURORALOGOSFUNDO.ico" alt="">
        <span class="d-none d-lg-block">Aurora Boreal</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->




    </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->



  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Painéis e gerenciamentos</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Pág.inicial</a></li>
          <li class="breadcrumb-item active">Painéis</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section dashboard">
      <div class="row">

        <!-- Left side columns -->
        <div class="col-lg-12">
          <div class="row">

            <!-- Total Entradas Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card revenue-card">
                <div class="card-body">
                  <h5 class="card-title">Total de Entradas <span>| Geral</span></h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-currency-dollar" style="color: green;"></i>
                    </div>
                    <div class="ps-3">
                      <h6 id="total-entradas">
                        <% if (resumoFinanceiro && resumoFinanceiro.total_entradas) { %>
                          R$ <%= parseFloat(resumoFinanceiro.total_entradas).toLocaleString('pt-BR', {minimumFractionDigits: 2}) %>
                        <% } else { %>
                          R$ 0,00
                        <% } %>
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- End Total Entradas Card -->

            <!-- Total Despesas Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card sales-card">
                <div class="card-body">
                  <h5 class="card-title">Total de Despesas <span>| Geral</span></h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-cart" style="color: red;"></i>
                    </div>
                    <div class="ps-3">
                      <h6 id="total-despesas">
                        <% if (resumoFinanceiro && resumoFinanceiro.total_despesas) { %>
                          R$ <%= parseFloat(resumoFinanceiro.total_despesas).toLocaleString('pt-BR', {minimumFractionDigits: 2}) %>
                        <% } else { %>
                          R$ 0,00
                        <% } %>
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- End Total Despesas Card -->

            <!-- Lucro Total Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card customers-card">
                <div class="card-body">
                  <h5 class="card-title">Lucro Atual <span>| Geral</span></h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <%
                        let lucro = resumoFinanceiro ? resumoFinanceiro.lucro_total : 0;
                        let corLucro = lucro >= 0 ? 'green' : 'red';
                        let iconeLucro = lucro >= 0 ? 'bi-graph-up' : 'bi-graph-down';
                      %>
                      <i class="bi <%= iconeLucro %>" style="color: <%= corLucro %>;"></i>
                    </div>
                    <div class="ps-3">
                      <h6 id="lucro-total" style="color: <%= corLucro %>;">
                        <% if (resumoFinanceiro && resumoFinanceiro.lucro_total !== null) { %>
                          R$ <%= parseFloat(resumoFinanceiro.lucro_total).toLocaleString('pt-BR', {minimumFractionDigits: 2}) %>
                        <% } else { %>
                          R$ 0,00
                        <% } %>
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- End Lucro Total Card -->

            <!-- Movimentações Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card">
                <div class="card-body">
                  <h5 class="card-title">Movimentações <span>| Recentes</span></h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-list-ul" style="color: #0d6efd;"></i>
                    </div>
                    <div class="ps-3">
                      <h6 id="total-movimentacoes">
                        <%= movimentacaoRecente ? movimentacaoRecente.length : 0 %> registros
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- End Movimentações Card -->


          </div>
        </div><!-- End Left side columns -->

        <!-- Controle Financeiro -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Controle Financeiro</h5>

            <!-- Formulário para Entradas e Despesas -->
            <div class="row g-3" id="formFinanceiro">
              <div class="col-md-6">
                <label for="nome-financeiro" class="form-label">Descrição:</label>
                <input type="text" class="form-control" id="nome-financeiro" placeholder="Ex: Mensalidade, Salário, Material..." required>
                <span id="nomeFinanceiroError" style="color:red; display:none;">Descrição é obrigatória.</span>
              </div>

              <div class="col-md-3">
                <label for="tipo-financeiro" class="form-label">Tipo:</label>
                <select class="form-select" id="tipo-financeiro" required>
                  <option value="">Selecione o tipo</option>
                  <option value="entrada">Entrada (Receita)</option>
                  <option value="despesa">Despesa (Gasto)</option>
                </select>
                <span id="tipoFinanceiroError" style="color:red; display:none;">Tipo é obrigatório.</span>
              </div>

              <div class="col-md-3">
                <label for="valor-financeiro" class="form-label">Valor (R$):</label>
                <input type="number" class="form-control" id="valor-financeiro" step="0.01" min="0" max="999999.99" placeholder="0,00" required>
                <span id="valorFinanceiroError" style="color:red; display:none;">Valor deve ser maior que zero.</span>
              </div>

              <div class="col-12 text-center">
                <button type="button" id="cadastrar-financeiro-button" class="btn btn-primary">
                  <i class="bi bi-plus-circle"></i> Registrar
                </button>
                <button type="button" id="limpar-financeiro-button" class="btn btn-secondary">
                  <i class="bi bi-arrow-clockwise"></i> Limpar
                </button>
              </div>
            </div>

            <div id="financeiro-sucesso" style="display:none;color:green;">
              <i class="bi bi-check-circle"></i> Registro financeiro adicionado com sucesso!
            </div>
            <div id="financeiro-erro" style="display:none;color:red;">
              <i class="bi bi-exclamation-triangle"></i> Erro ao registrar. Verifique os dados.
            </div>
          </div>
        </div>

        <!-- Tabela de Movimentações Financeiras -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Movimentações Financeiras</h5>

            <!-- Filtros -->
            <div class="row mb-3">
              <div class="col-md-4">
                <select class="form-select" id="filtro-tipo">
                  <option value="">Todos os tipos</option>
                  <option value="entrada">Apenas Entradas</option>
                  <option value="despesa">Apenas Despesas</option>
                </select>
              </div>
              <div class="col-md-4">
                <button type="button" class="btn btn-outline-primary" id="atualizar-financeiro">
                  <i class="bi bi-arrow-clockwise"></i> Atualizar
                </button>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Descrição</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Valor</th>
                    <th scope="col">Impacto no Lucro</th>
                    <th scope="col">Ações</th>
                  </tr>
                </thead>
                <tbody id="tabela-financeiro">
                  <!-- Dados serão carregados via JavaScript -->
                  <% if (movimentacaoRecente && movimentacaoRecente.length > 0) { %>
                    <% movimentacaoRecente.forEach((mov, index) => { %>
                      <tr>
                        <td><%= mov.id %></td>
                        <td><%= mov.nome %></td>
                        <td>
                          <span class="badge bg-<%= mov.tipo === 'entrada' ? 'success' : 'danger' %>">
                            <%= mov.tipo === 'entrada' ? 'Entrada' : 'Despesa' %>
                          </span>
                        </td>
                        <td>R$ <%= parseFloat(mov.valor).toLocaleString('pt-BR', {minimumFractionDigits: 2}) %></td>
                        <td style="color: <%= mov.valor_lucro >= 0 ? 'green' : 'red' %>;">
                          R$ <%= parseFloat(mov.valor_lucro).toLocaleString('pt-BR', {minimumFractionDigits: 2}) %>
                        </td>
                        <td>
                          <button class="btn btn-sm btn-outline-danger" onclick="excluirMovimentacao(<%= mov.id %>)">
                            <i class="bi bi-trash"></i>
                          </button>
                        </td>
                      </tr>
                    <% }) %>
                  <% } else { %>
                    <tr>
                      <td colspan="6" class="text-center text-muted">Nenhuma movimentação registrada</td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Table with stripped rows -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Registro de Compras/Gastos</h5>
            <div class="row g-3" id="formRegistro">
              <div class="col-md-12">
                <label for="nome-produto" class="form-label">Nome do Produto:</label>
                <input type="text" class="form-control" id="nome-produto" required>
                <span id="nameError" style="color:red; display:none;">Nome do produto é obrigatório.</span>
              </div>
              <div class="col-md-6">
                <label for="descricao" class="form-label">Descrição: </label>
                <input type="text" class="form-control" id="descricao-produto" required>
                <span id="descricaoError" style="color:red; display:none;">Descrição deve ter entre 20 e 200
                  caracteres.</span>
              </div>
              <div class="col-md-6">
                <label for="quantidade" class="form-label">Quantidade: </label>
                <input type="number" class="form-control quantidade" id="quantidade-produto" min="1" max="999" required>
                <span id="quantidadeError" style="color:red; display:none;">Quantidade não pode ser negativa ou maior
                  que 999.</span>
              </div>

              <div class="col-md-6">
                <label for="valor-gasto">Valor (R$):</label>
                <input type="number" class="form-control valor" id="valor-gasto-produto" name="valor-gasto" step="0.01"
                  min="0" max="9999.99" required>
                <span id="valorError" style="color:red; display:none;">Valor não pode ser negativo ou maior que
                  9999,99.</span><br><br>
              </div>

              <div class="col-md-4">
                <label for="inputState" class="form-label">Tipo de produto</label>
                <select id="inputState" class="form-select" required>
                  <option selected>Alimentos</option>
                  <option>Material para sala de aula</option>
                  <option>Tecnológico</option>
                </select>
                <span id="tipoError" style="color:red; display:none;">Tipo de produto é obrigatório.</span>
              </div>

              <div class="text-center">
                <button type="submit" id="validar-produto-button" class="btn btn-primary">Enviar</button>
                <button type="reset" class="btn btn-secondary">Limpar</button>
              </div>
            </div>
            <div id="produto-sucesso" style="display:none;color:green;">Produto adicionado com sucesso!</div>
            <div id="produto-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>
          </div>
        </div>

        <div class="card">
          <div class="card-body" id="produtos-cadastrados">
            <h5 class="card-title mt-4">Registro de Produtos</h5>
            <h6>Total gasto: R$ <span id="totalGasto">0,00</span></h6>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Nome</th>
                  <th scope="col">Quantidade</th>
                  <th scope="col">Tipo de produto</th>
                  <th scope="col">Valor</th>
                  <th scope="col">Data de registro</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody id="tabelaProdutos">
              </tbody>
            </table>
          </div>
        </div>
        <!-- Cadastro alunos-->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">CADASTRAR ALUNO</h5>
            <h3>Dados do aluno e responsável</h3>

            <div class="mb-3">
              <input type="text" class="form-control" name="nome-aluno" placeholder="Nome completo do aluno"
                id="nome-aluno" required>

              <small id="nome-aluno-error" style="color: red; display: none;">Campo obrigatório</small>
            </div>

            <div class="mb-3">
              <input type="text" class="form-control" name="nome-responsavel" placeholder="Nome completo do responsável"
                id="nome-responsavel" required>

              <small id="nome-responsavel-error" style="color: red; display: none;">Campo obrigatório</small>
            </div>

            <div class="mb-3">
              <input type="text" name="cpf-aluno" id="cpf-aluno" class="form-control mask-cpf"
                placeholder="CPF do aluno" maxlength="14" required>

              <small id="cpf-aluno-error" style="color: red; display: none;">CPF inválido</small>
            </div>

            <div class="mb-3">
              <input type="text" name="cpf-responsavel" id="cpf-responsavel" class="form-control mask-cpf"
                placeholder="CPF do responsável" maxlength="14" required>

              <small id="cpf-responsavel-error" style="color: red; display: none;">CPF inválido</small>
            </div>

            <div class="mb-3">
              <label for="data_aniversario">Data de nascimento do aluno</label>
              <input type="date" class="form-control" name="data_aniversario" id="data_aniversario" required>
              <small id="data-aniversario-error" style="color: red; display: none;">Data inválida</small>
            </div>

            <div class="mb-3">
              <label for="serie-select" class="form-label">Selecione a Serie:</label>
              <select class="form-select serie-select" id="serie-select" name="serie">
                <option value="" selected disabled>Selecione a Serie</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="turma-select" class="form-label">Selecione a Turma:</label>
              <select class="form-select turma-select" id="turma-select" name="turma">
                <option value="" selected disabled>Selecione a turma</option>
              </select>
            </div>



            <h3>Dados para contato</h3>

            <div class="mb-3">
              <input type="text" name="email-aluno" id="email-aluno" class="form-control" placeholder="Email" required>

              <small id="email-aluno-error" style="color: red; display: none;">Email inválido</small>
            </div>

            <div class="mb-3">
              <input type="text" name="numero-celular" id="numero-celular" class="form-control"
                placeholder="Número de celular" maxlength="11" required>

              <small id="celular-error" style="color: red; display: none;">Número inválido</small>
            </div>

            <h3>Cadastro para o acesso ao Sistema Acadêmico</h3>

            <div class="mb-3">
              <input type="email" name="senha-academica" id="email-academica" class="form-control"
                placeholder="Crie um E-mail" required>

              <small id="email-error" style="color: red; display: none;">Email inválido</small>
            </div>

            <div class="mb-3">
              <input type="password" name="senha-academica" id="senha-academica" class="form-control"
                placeholder="Crie uma senha" required>

              <small id="senha-error" style="color: red; display: none;">Senha inválida</small>
            </div>

            <div class="mb-3">
              <button type="button" class="btn btn-primary" id="validar-aluno-button">Efetuar Matrícula</button>
            </div>

            <div id="matricula-sucesso" style="display:none;color:green;">Matrícula efetuada com sucesso!</div>
            <div id="matricula-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>
          </div>
          <div>
            <a href="#" data-bs-toggle="collapse" data-bs-target="#alunos-cadastrados">
              <h5 class="card-title mt-4">Alunos Cadastrados <i class="bi bi-arrow-down-short"></i></h5>
            </a>

            <div class="collapse" id="alunos-cadastrados">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">#</th>

                    <th scope="col">Nome</th>
                    <th scope="col">cpf aluno </th>
                    <th scope="col">turma</th>
                    <th scope="col">Email</th>
                    <th scope="col">responsavel</th>
                    <th scope="col">telefone</th>
                    <th scope="col">ações</th>
                  </tr>
                </thead>
                <tbody>

                </tbody>

              </table>

            </div>
          </div>

        </div>
        <!-- fim cadastro alunos -->




      </div>
      </div>
      <!-- fim cadastro alunos -->


      <!--  table alunos -->
      <!--fim do formulário-->
      <!-- fim Table alunos  -->
      <!--Adicionar turmas-->
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Adicionar Série</h5>
          <form class="row g-3" id="formRegistro">
            <div class="col-md-12">
              <label for="inputName5" class="form-label">Nome da série:</label>
              <input type="text" class="form-control" id="inputName5" required>
              <span id="nameError" style="color:red; display:none;">Nome da série é obrigatório.</span>
            </div>

            <div class="col-md-6">

              <label for="ano" class="form-label">Ano:</label>
              <input type="number" id="ano" name="ano" min="1900" max="2099" step="1">
              <span id="anoError" style="color:red; display:none;">Ano é obrigatório.</span>
            </div>


            <div class="text-center">
              <button type="submit" class="btn btn-primary" id="validar-serie-button">Adicionar Série</button>
              <button type="reset" class="btn btn-secondary">Limpar</button>
            </div>
            <div id="serie-sucesso" style="display:none;color:green;">Série adicionada com sucesso!</div>
            <div id="serie-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>
          </form>

          <a href="#" data-bs-toggle="collapse" data-bs-target="#series-cadastradas">
            <h5 class="card-title mt-4">Series Cadastradas <i class="bi bi-arrow-down-short"></i></h5>
          </a>

          <div class="collapse" id="series-cadastradas">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>

                  <th scope="col">Nome</th>
                  <th scope="col">Ano</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>
              </tbody>

            </table>

          </div>


        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Adicionar Turma</h5>
          <div class="row g-3" id="formRegistro">
            <div class="col-md-12">
              <label for="inputName5" class="form-label">Nome da turma:</label>
              <input type="text" class="form-control" id="inputName5" required>
              <span id="nameError" style="color:red; display:none;">Nome da turma é obrigatório.</span>
            </div>

            <div class="col-md-6">
              <label for="Serie" class="form-label">Serie: </label>
              <select class="form-select serie-select" id="Serie" name="Serie">
                <option value="">Não há serie cadastrada</option>
              </select>
              <span id="serieError" style="color:red; display:none;">Serie é obrigatório.</span>
            </div>


            <div class="text-center">
              <button type="submit" class="btn btn-primary" id="validar-turma-button">Adicionar Turma</button>
            </div>
            <div id="turma-sucesso" style="display:none;color:green;">Turma adicionada com sucesso!</div>
            <div id="turma-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>
          </div>
          <a href="#" data-bs-toggle="collapse" data-bs-target="#turmas-cadastradas">
            <h5 class="card-title mt-4">Turmas Cadastradas <i class="bi bi-arrow-down-short"></i></h5>
          </a>

          <div class="collapse" id="turmas-cadastradas">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>

                  <th scope="col">Nome</th>
                  <th scope="col">Serie</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>

              </tbody>

            </table>

          </div>



        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Adicionar Sala</h5>
          <div class="row g-3" id="formRegistro">
            <div class="col-md-12">
              <label for="nome-sala" class="form-label">Nome da sala:</label>
              <input type="text" class="form-control" id="nome-sala" required>
              <span id="nameError" style="color:red; display:none;">Nome da sala é obrigatório.</span>
            </div>
            <div class="text-center">
              <button type="submit" class="btn btn-primary" id="validar-sala-button">Adicionar Sala</button>
            </div>
          </div>
          <div id="sala-sucesso" style="display:none;color:green;">Sala adicionada com sucesso!</div>
          <div id="sala-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>

          <a href="#" data-bs-toggle="collapse" data-bs-target="#salas-cadastradas">
            <h5 class="card-title mt-4">Salas Cadastradas <i class="bi bi-arrow-down-short"></i></h5>
          </a>

          <div class="collapse" id="salas-cadastradas">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>

                  <th scope="col">Nome</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>

              </tbody>

            </table>

          </div>

        </div>
      </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Associar turma a sala</h5>
          <h5>escolha a turma</h5>
          <select class="form-select turma-select" id="turma-sala-select" name="turma">
            <% if (typeof turmas !='undefined' ) { %>
              <% turmas.forEach(turma=> { %>
                <option value="<%= turma.id %>">
                  <%= turma.nome %>
                </option>
                <% }) %>
                  <% } %>
          </select>
          <h5>escolha a sala</h5>
          <select class="form-select " id="sala-select" name="sala">
            <% if (typeof salas !='undefined' ) { %>
              <% salas.forEach(sala=> { %>
                <option value="<%= sala.id %>">
                  <%= sala.nome %>
                </option>
                <% }) %>
                  <% } %>
          </select>
          <div class="m-3"></div>
          <div class="text-center">
            <button type="button" class="btn btn-primary" id="validar-turma-sala-button">Associar</button>
          </div>

          <div id="turma-sala-sucesso" style="display:none;color:green;">Associação realizada com sucesso!</div>
          <div id="turma-sala-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>

          <a href="#" data-bs-toggle="collapse" data-bs-target="#turmas-salas-cadastradas">
            <h5 class="card-title mt-4">Turmas e Salas Cadastradas <i class="bi bi-arrow-down-short"></i></h5>
          </a>

          <div class="collapse" id="turmas-salas-cadastradas">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>

                  <th scope="col">Turma</th>
                  <th scope="col">Sala</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>
                
              </tbody>

            </table>

          </div>



        </div>
      </div>



      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Adicionar Disciplina</h5>
          <div class="row g-3" id="formRegistro">
            <div class="col-md-12">
              <label for="inputName5" class="form-label">Nome da disciplina:</label>
              <input type="text" class="form-control" id="disciplina-nome" required>
              <span id="nameError" style="color:red; display:none;">Nome da disciplina é obrigatório.</span>
            </div>
            <div class="text-center">
              <button type="submit" class="btn btn-primary" id="validar-disciplina-button">Adicionar
                disciplina</button>
            </div>
          </div>
          <div id="disciplina-sucesso" style="display:none;color:green;">Disciplina adicionada com sucesso!</div>
          <div id="disciplina-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>

          <a href="#" data-bs-toggle="collapse" data-bs-target="#disciplinas-cadastradas">
            <h5 class="card-title mt-4">Disciplinas Cadastradas <i class="bi bi-arrow-down-short"></i></h5>
          </a>

          <div class="collapse" id="disciplinas-cadastradas">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>

                  <th scope="col">Nome</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>
              </tbody>

            </table>

          </div>



        </div>
      </div>
      <div class="card">
        <div class="card-body">


          <h5 class="card-title mt-4">Disciplinas</h5>


          <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">#</th>

                <th scope="col">Nome</th>
                <th scope="col">Ações</th>
              </tr>
            </thead>
            <tbody>
            </tbody>

          </table>

        </div>
      </div>




      <div class="card">
        <div class="card-body">
          <h5 class="card-title">
            <label for="turma-select" class="form-label"> Selecione a Turma:</label>
            <select class="form-select turma-select" id="horario-turma-select" name="Turma">
            </select>
          </h5>
          <h5 class="card-title">
            <label for="diciplina-select" class="form-label"> Selecione a Disciplina:</label>
            <select class="form-select disciplina-select disciplina-OnTurmaID-select" id="horario-disciplina-select" name="disciplinas">

            </select>
          </h5>

          <!-- horários table  -->
          <h5 class="card-title mt-4">Horários</h5>
          <div class="mb-3" id="horario-cadastrados">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th scope="col" style="width: 100px;">Horário</th>
                  <th scope="col" style="width: 100px;">Segunda-feira</th>
                  <th scope="col" style="width: 100px;">Terça-feira</th>
                  <th scope="col" style="width: 100px;">Quarta-feira</th>
                  <th scope="col" style="width: 100px;">Quinta-feira</th>
                  <th scope="col" style="width: 100px;">Sexta-feira</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">7:00 - 7:50</th>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <th scope="row">7:50 - 8:40</th>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <th scope="row">8:40 - 9:30</th>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <th scope="row">9:30 - 10:00</th>
                  <td colspan="5" style="text-align: center;">Intervalo</td>
                </tr>
                <tr>
                  <th scope="row">10:00 - 10:50</th>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <th scope="row">10:50 - 11:40</th>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <th scope="row">11:40 - 12:25</th>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="text-center">
            <button type="button" class="btn btn-primary" id="save-horario-button">Salvar Horário</button>
          </div>
        </div>


      </div>

      <!-- Cadastro Professores -->
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">CADASTRAR PROFESSOR</h5>
          <h3>Dados do Professor</h3>
          <div class="mb-3">
            <input type="text" class="form-control" name="nome-prof" placeholder="Nome completo do professor"
              id="nome-prof" required>

            <small id="nome-prof-error" style="color: red; display: none;">Campo obrigatório</small>
          </div>



          <div class="mb-3">
            <input type="text" name="cpf-prof" id="cpf-prof" class="form-control mask-cpf"
              placeholder="CPF do Professor" maxlength="14" required oninput="maskCPF(this)">

            <small id="cpf-prof-error" style="color: red; display: none;">CPF inválido</small>
          </div>



          <div class="mb-3">
            <label for="salario">Salário</label>
            <input type="number" class="form-control" name="salario" id="salario" required>
            <small id="salario-error" style="color: red; display: none;">Salário inválido</small>
          </div>


          <h3>Dados para contato</h3>

          <div class="mb-3">
            <input type="text" name="email-prof" id="email-prof" class="form-control" placeholder="Email" required>

            <small id="email-prof-error" style="color: red; display: none;">Email inválido</small>
          </div>

          <div class="mb-3">
            <input type="text" name="prof-numero-celular" id="prof-numero-celular" class="form-control"
              placeholder="Número de celular" maxlength="11" required>

            <small id="celular-error" style="color: red; display: none;">Número inválido</small>
          </div>

          <h3>Senha para o acesso ao Sistema Acadêmico</h3>

          <div class="mb-3">
            <input type="password" name="senha-academica" id="senha-academica" class="form-control"
              placeholder="Crie uma senha" required>

            <small id="senha-error" style="color: red; display: none;">Senha inválida</small>
          </div>

          <div class="mb-3">
            <button type="button" class="btn btn-primary" id="validar-professor-button">Efetuar Registro</button>
          </div>

          <div id="registro-sucesso" style="display:none;color:green;">Registro efetuada com sucesso!</div>
          <div id="registro-erro" style="display:none;color:red;">Preencha todos os campos corretamente.</div>
        </div>
      </div>
      <div class="card">
        <div class="card-body" id="professores-cadastrados">


          <h5 class="card-title mt-4">Professores</h5>


          <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">id</th>

                <th scope="col">Nome</th>
                <th scope="col">cpf</th>
                <th scope="col">Email</th>
                <th scope="col">telefone</th>
                <th scope="col">ações</th>
              </tr>
            </thead>
            <tbody>

            </tbody>

          </table>

        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Associar professor a disciplina</h5>
          <h3>escolha o professor</h3>
          <select class="form-select " id="professor-select" name="professor">
            <% for( let i=0; i < professores.length; i++ ) { %>
              <option value="<%= professores[i].id %>">
                <%= professores[i].nome %>
              </option>
              <% } %>
          </select>
          <!-- Disciplinas table  -->
          <h5 class="card-title mt-4">Disciplinas</h5>
          <a type="button" id="addDisciplina" class="btn btn-primary">Adicionar mais disciplina </a>
          <div class="mb-3 table-div" id="disciplinas-professores-cadastradas">
            <table id="professor-table" class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">Turma</th>
                  <th scope="col">Disciplina</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>
                <tr data-number="0">
                  <th>Não há disciplinas cadastradas</th>
                </tr>
              </tbody>
            </table>
            <a type="button" class="btn btn-primary" id="validar-professor-turma-disciplina-button">Associar</a>
          </div>
        </div>
      </div>
      <!-- fim cadastro alunos -->


      </div><!-- End Right side columns -->
    </section>

  </main><!-- End #main -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>
  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="/js/direcao.js"></script>
  <script src="/js/direcao_horario.js"></script>

  <script>
    function cancelarAddDisciplina(button) {
      let tr = button.parentNode.parentNode;
      tr.remove();    // remove the row from the table
    }

    // ========== FUNCIONALIDADES FINANCEIRAS ==========

    // Cadastrar nova entrada/despesa
    document.getElementById('cadastrar-financeiro-button').addEventListener('click', function() {
      const nome = document.getElementById('nome-financeiro').value.trim();
      const tipo = document.getElementById('tipo-financeiro').value;
      const valor = parseFloat(document.getElementById('valor-financeiro').value);

      // Limpar mensagens anteriores
      document.getElementById('financeiro-sucesso').style.display = 'none';
      document.getElementById('financeiro-erro').style.display = 'none';

      // Validações
      let hasError = false;

      if (!nome) {
        document.getElementById('nomeFinanceiroError').style.display = 'block';
        hasError = true;
      } else {
        document.getElementById('nomeFinanceiroError').style.display = 'none';
      }

      if (!tipo) {
        document.getElementById('tipoFinanceiroError').style.display = 'block';
        hasError = true;
      } else {
        document.getElementById('tipoFinanceiroError').style.display = 'none';
      }

      if (!valor || valor <= 0) {
        document.getElementById('valorFinanceiroError').style.display = 'block';
        hasError = true;
      } else {
        document.getElementById('valorFinanceiroError').style.display = 'none';
      }

      if (hasError) {
        document.getElementById('financeiro-erro').style.display = 'block';
        return;
      }

      // Enviar dados para o servidor
      fetch('/system/financeiro/cadastrar', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        credentials: 'include',
        body: JSON.stringify({
          nome: nome,
          tipo: tipo,
          valor: valor
        })
      })
      .then(response => response.json())
      .then(result => {
        if (result.sucesso) {
          document.getElementById('financeiro-sucesso').style.display = 'block';
          // Limpar formulário
          document.getElementById('nome-financeiro').value = '';
          document.getElementById('tipo-financeiro').value = '';
          document.getElementById('valor-financeiro').value = '';
          // Atualizar tabela e cards
          atualizarDadosFinanceiros();
        } else {
          document.getElementById('financeiro-erro').style.display = 'block';
          document.getElementById('financeiro-erro').innerHTML =
            '<i class="bi bi-exclamation-triangle"></i> ' + result.mensagem;
        }
      })
      .catch(error => {
        console.error('Erro:', error);
        document.getElementById('financeiro-erro').style.display = 'block';
      });
    });

    // Limpar formulário
    document.getElementById('limpar-financeiro-button').addEventListener('click', function() {
      document.getElementById('nome-financeiro').value = '';
      document.getElementById('tipo-financeiro').value = '';
      document.getElementById('valor-financeiro').value = '';
      document.getElementById('financeiro-sucesso').style.display = 'none';
      document.getElementById('financeiro-erro').style.display = 'none';
      // Limpar erros
      document.getElementById('nomeFinanceiroError').style.display = 'none';
      document.getElementById('tipoFinanceiroError').style.display = 'none';
      document.getElementById('valorFinanceiroError').style.display = 'none';
    });

    // Atualizar dados financeiros
    document.getElementById('atualizar-financeiro').addEventListener('click', function() {
      atualizarDadosFinanceiros();
    });

    // Função para atualizar dados financeiros
    function atualizarDadosFinanceiros() {
      fetch('/system/financeiro/resumo', {
        method: 'GET',
        credentials: 'include'
      })
      .then(response => response.json())
      .then(result => {
        if (result.sucesso) {
          // Atualizar cards
          const resumo = result.resumo;
          document.getElementById('total-entradas').textContent =
            'R$ ' + (resumo.total_entradas || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2});
          document.getElementById('total-despesas').textContent =
            'R$ ' + (resumo.total_despesas || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2});

          const lucro = resumo.lucro_total || 0;
          const lucroElement = document.getElementById('lucro-total');
          lucroElement.textContent = 'R$ ' + lucro.toLocaleString('pt-BR', {minimumFractionDigits: 2});
          lucroElement.style.color = lucro >= 0 ? 'green' : 'red';

          document.getElementById('total-movimentacoes').textContent =
            (result.movimentacao ? result.movimentacao.length : 0) + ' registros';

          // Atualizar tabela
          atualizarTabelaFinanceira(result.movimentacao);
        }
      })
      .catch(error => {
        console.error('Erro ao atualizar dados financeiros:', error);
      });
    }

    // Função para atualizar tabela
    function atualizarTabelaFinanceira(movimentacoes) {
      const tbody = document.getElementById('tabela-financeiro');
      tbody.innerHTML = '';

      if (movimentacoes && movimentacoes.length > 0) {
        movimentacoes.forEach(mov => {
          const row = tbody.insertRow();
          row.innerHTML = `
            <td>${mov.id}</td>
            <td>${mov.nome}</td>
            <td>
              <span class="badge bg-${mov.tipo === 'entrada' ? 'success' : 'danger'}">
                ${mov.tipo === 'entrada' ? 'Entrada' : 'Despesa'}
              </span>
            </td>
            <td>R$ ${parseFloat(mov.valor).toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
            <td style="color: ${mov.valor_lucro >= 0 ? 'green' : 'red'};">
              R$ ${parseFloat(mov.valor_lucro).toLocaleString('pt-BR', {minimumFractionDigits: 2})}
            </td>
            <td>
              <button class="btn btn-sm btn-outline-danger" onclick="excluirMovimentacao(${mov.id})">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          `;
        });
      } else {
        tbody.innerHTML = '<tr><td colspan="6" class="text-center text-muted">Nenhuma movimentação registrada</td></tr>';
      }
    }

    // Função para excluir movimentação
    function excluirMovimentacao(id) {
      if (confirm('Tem certeza que deseja excluir esta movimentação?')) {
        fetch('/system/financeiro/excluir', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          credentials: 'include',
          body: JSON.stringify({ id: id })
        })
        .then(response => response.json())
        .then(result => {
          if (result.sucesso) {
            atualizarDadosFinanceiros();
          } else {
            alert('Erro ao excluir: ' + result.mensagem);
          }
        })
        .catch(error => {
          console.error('Erro:', error);
          alert('Erro ao excluir movimentação');
        });
      }
    }

    // Carregar dados ao inicializar a página
    document.addEventListener('DOMContentLoaded', function() {
      // Dados já carregados pelo servidor, mas podemos atualizar se necessário
    });

    // ========== FIM DAS FUNCIONALIDADES FINANCEIRAS ==========
  </script>

</body>

</html>